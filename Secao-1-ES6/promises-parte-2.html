<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Document</title>
</head>
<body>

     <script>

          let promessa = new Promise((resolve, reject) => {

               //requisição http para recuperar a relação de usuários

               setTimeout(() => {

                    //requisição foi realizada de algum modo
                    let resposta_da_requisicao = {}

                    //errona requisição
                    if(false) {

                         resposta_da_requisicao = {
                              codigo: 1050,
                              erro: 'Falha de autorização'
                         }

                         reject(resposta_da_requisicao)
                    }

                    resposta_da_requisicao = {
                         0: { id: 1,  nome: 'Carol'},
                         1: { id: 2,  nome: 'Célia'},
                         2: { id: 3,  nome: 'Chorrinha'}

                    }

                    resolve(resposta_da_requisicao)

               },4000)

          }).then(dados => {
               console.log(dados)
               
               let promessa2 = new Promise((resolve, reject) => {
                    //requisição http para recuperar a relação de posts dos usuários

                    setTimeout(() => {

                    //requisição foi realizada de algum modo
                    let resposta_da_requisicao = {}

                    //errona requisição
                    if(false) {

                         resposta_da_requisicao = {
                              codigo: 7788,
                              erro: 'erro ao recuperar os posts'
                         }

                         reject(resposta_da_requisicao)
                    }

                    resposta_da_requisicao = {
                         0: { id: 1,  usuario_id: 1, posts:[
                              {id:1, post: 'post 1'},
                              {id:2, post: 'post 2'}
                         ]},

                         1: { id: 2,  usuario_id: 2, posts:[
                              {id:3, post: 'post 3'},
                              {id:4, post: 'post 4'}
                         ]},

                         2: { id: 3,  usuario_id: 3, posts:[
                              {id:5, post: 'post 5'},
                              {id:6, post: 'post 6'}
                         ]}

                    }

                    resolve(resposta_da_requisicao)

               },4000)
                    
               }).then(dados => {
                    console.log(dados)
               }).catch(erro => {
                    console.log(erro)
                    
               })

          }).then(param => {
               console.log('then numero 2', param)
          }).then(() => {
               console.log('then numero 3')
          }).catch(error =>  {
               console.log('operção sequencial (catch)', error)
          }).then(() => {
               
               console.log('then numero 4')
          }).then(() => {
               
               console.log('then numero 5')
          })

     </script>

</body>
</html>